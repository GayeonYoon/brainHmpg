var client_width;var client_height;var header_height;var ie8=false;var tpl_mymenu_item="";var browser=(function(){var b=navigator.userAgent.toLowerCase();var a=/(webkit)[ \/](\w.]+)/.exec(b)||/(opera)(?:.*version)?[ \/](\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||!/compatible/.test(b)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(b)||[];return{name:a[1]||"",version:a[2]||"0"}}());if(browser.name=="msie"&&browser.version=="7.0"){ie8=true}$(function(a){window.onload=function(){fn_resize();tpl_mymenu_item=a("#menu_favorite_list").html();fn_load_mymenu()};window.onresize=function(){fn_resize()};a("iframe").attr("frameborder",0);a("iframe").attr("border",0);window.fn_resize=function(){client_width=a(window).width();client_height=a(window).height();header_height=a(".aram-admin-skin > header").outerHeight();header_height+=a(".aram-admin-skin > header").position().top;if(ie8){if(client_width<1024){client_width=client_width<1024?1024:client_width;a("body").css("width",client_width+"px")}}if(client_width<768){set_mobile_layout()}else{set_pc_layout()}};window.set_pc_layout=function(){if(a("#mnb_site_menu > li.selected").length>0&&!a("#mnb_site_menu").parent().hasClass("open")){a("#mnb_site_menu").parent().addClass("open");a("#mnb_site_menu > li.selected > a").next("ul").before('<h3 class="mnb_site_menu_title">'+a("#mnb_site_menu > li.selected > a").text()+"</h3>")}a(".aram-admin-skin").css("height",client_height+"px");a(".aram-admin-skin > nav").css("top",(header_height)+"px");a(".aram-admin-skin > nav > ul").css("height",(client_height-header_height)+"px");var c=a(".aram-admin-skin > nav").outerWidth();a(".aram-admin-skin > section").css("margin-left",(c)+"px");var e=124;if(skin_master!=0){a(".aram-admin-skin > nav > ul > li > ul").css("height",(client_height-header_height-e-110)+"px")}else{a(".aram-admin-skin > nav > ul > li > ul").css("height",(client_height-header_height-e)+"px")}var b=a("#admin_main_frame").contents().find("body").height()+500;var f=client_height-header_height;var d=f<b?b:f;a("#admin_main_frame").css("height",(f)+"px");a(".aram-admin-skin > section").css("height",f+"px")};window.set_mobile_layout=function(){var d=a(".aram-admin-skin > nav").outerHeight();a(".aram-admin-skin > nav").attr("style","");a("#mnb_site_menu_favorite").attr("style","");a("#mnb_site_menu_search").attr("style","");a(".aram-admin-skin > section").attr("style","");a("#mnb_site_menu").attr("style","");a("#mnb_site_menu *").attr("style","");a("#mnb_site_menu").parent().removeClass("open");var b=a("#admin_main_frame").contents().find("body").height()+500;var e=client_height-header_height-d-4;var c=e<b?b:e;a("#admin_main_frame").css("height",c+"px")};a("#admin_main_frame").load(function(){var d=a(window).width();var b=a(this).contents().find("body").height()+500;var e=a(window).height()-a(".aram-admin-skin > header").outerHeight();var c=e<b?b:e;if(d<768&&!ie8){a(this).css("height",(c)+"px")}else{a(this).css("height",(e)+"px")}});a("#mnb_site_menu > li > a").on("click",fn_pc_main_depth);a("#mnb_site_menu ul a").not(".btn-popup").on("click",fn_pc_sub_depth);a("#mnb_site_menu_favorite > h2 > a").on("click",fn_fa_menu);a("#mnb_site_menu_search > h2 > a").on("click",fn_fa_menu);a(".aram-admin-skin header nav h2").on("click",function(){if(a(this).hasClass("on")){a(this).removeClass("on");a(this).parents("nav").removeClass("open");screen_overlay_del()}else{fn_close_all_menu();a(this).parents("header").find("nav").removeClass("open");a(this).parents("header").find("h2").removeClass("on");a(this).addClass("on");a(this).parents("nav").addClass("open");screen_overlay()}});a(".aram-admin-skin header nav a").on("click",function(){fn_close_all_menu();a(this).parents("header").find("nav").removeClass("open");a(this).parents("header").find("h2").removeClass("on")});a(".mnb-site-title a").on("click",function(){a("#mnb_site_menu").attr("class","");if(a(this).hasClass("on")){a(this).removeClass("on");screen_overlay_del()}else{fn_close_all_menu();screen_overlay();a(this).parents("header").find("nav").removeClass("open");a(this).parents("header").find("h2").removeClass("on");a(this).addClass("on");a("#mnb_site_menu").addClass("depth_1")}return false});a("#screen_overlay").click(function(){fn_close_all_menu()});a("#uparrow").click(function(){a("body,html").animate({scrollTop:0},800);return false});window.onscroll=function(){var b=a(window).scrollTop();if(client_width<768&&b>50){a("#uparrow").fadeIn()}else{a("#uparrow").fadeOut()}}});function screen_overlay(){$("section").addClass("overlay")}function screen_overlay_del(){$("section").removeClass("overlay")}function fn_pc_main_depth(){if(client_width<768&&!ie8){if($("#mnb_site_menu").attr("class")==""||typeof $("#mnb_site_menu").attr("class")=="undefined"){$(this).addClass("on");$("#mnb_site_menu").addClass("depth_2");screen_overlay();return false}else{if($("#mnb_site_menu").attr("class")=="depth_2"){$(this).removeClass("on");$("#mnb_site_menu").attr("class","");fn_close_all_menu();fn_resize();return false}else{if($("#mnb_site_menu").attr("class")=="depth_1"){var b=$(this).attr("class");$("#mnb_site_menu > li").removeClass("selected");$(this).parents("li").addClass("selected");screen_overlay_del();$(".mnb-site-title h2").removeClass();$(".mnb-site-title h2").addClass(b);$(".mnb-site-title h2").addClass("ico");$(".mnb-site-title a").removeClass("on");$("#mnb_site_menu").attr("class","")}}}}else{var a=$(this).parents("#mnb_site_menu");if($(this).parent().hasClass("selected")){return true}else{fn_close_all_menu();$("#mnb_site_menu_home").removeClass("selected");a.find("li").removeClass("selected");$(this).parents("li").addClass("selected");$(this).siblings("ul").children("li:first-child").addClass("selected");if(!a.parent().hasClass("open")){a.parent().addClass("open")}}}fn_resize()}function fn_pc_sub_depth(){if(client_width<768&&!ie8){$("#mnb_site_menu li").removeClass("selected");$(this).parents("li").addClass("selected");$("#mnb_site_menu").attr("class","");fn_close_all_menu()}else{fn_close_all_menu();var a=$(this).parent().parent();a.find("li").removeClass("selected");$(this).parents("li").addClass("selected")}}function fn_fa_menu(){if($(this).parents("aside").hasClass("selected")){fn_close_all_menu()}else{fn_close_all_menu();screen_overlay();if($(this).attr("href")=="#mnb_site_menu_favorite"){fn_load_mymenu()}$(this).parents("aside").addClass("selected")}return false}$("#menu_favorite_list a").on("click",function(){if(client_width<768&&!ie8){fn_close_all_menu()}});function admin_menu_search_chk(){var a=document.admin_menu_form;if(!a.search_str.value){alert("검색어를 입력해주세요.");a.search_str.focus();return false}if(a.search_str.value.length<2){alert("검색어는 2자 이상 입력해주세요.");a.search_str.focus();return false}top.admin_page_url("/admin/sub_main/menu_search_page.htm?search_str="+encodeURIComponent(a.search_str.value));return false}function n_bookmark_del(a){if(confirm("선택한 마이메뉴를 삭제 하시겠습니까?")){$.ajax({type:"get",async:true,url:"/admin/sub_all/bookmark_exec.php?request_type=ajax&mode=del&idx="+a,success:function(c){var b=JSON.parse(c);if(b.reload||b.complete){fn_load_mymenu()}}})}}function n_bookmark_move(b,a){$.ajax({type:"get",async:true,url:"/admin/sub_all/bookmark_exec.php?request_type=ajax&mode=move&idx="+b+"&move_type="+a,success:function(d){var c=JSON.parse(d);if(c.reload){fn_load_mymenu()}}})}function n_bookmark_sav(a){if(confirm("마이메뉴에 추가 하시겠습니까?")){$.ajax({type:"get",async:true,url:"/admin/sub_all/bookmark_exec.php?request_type=ajax&mode=add&menu_s_idx="+a,success:function(c){var b=JSON.parse(c);if(b.reload){fn_load_mymenu()}}})}}function fn_load_mymenu(){$.ajax({type:"get",async:true,url:"/admin/sub_all/bookmark_list_ajax.htm",success:function(d){$("#menu_favorite_list").empty();var c=JSON.parse(d);var b=$("#menu_favorite_list");if(c!=null){for(i=0;i<c.length;i++){var a=tpl_mymenu_item;a=a.replace("[MY_LINK_URL]","javascript:top.admin_page_url('"+c[i]["url"]+"','"+c[i]["ajax_yn"]+"')");a=a.replace("[MY_LINK_NAME]",c[i]["subject"]);a=a.replace("[MY_LINK_DEL]","javascript:n_bookmark_del("+c[i]["idx"]+");");a=a.replace("[MY_LINK_ORDER_DOWN]","javascript:n_bookmark_move("+c[i]["idx"]+", 'down');");a=a.replace("[MY_LINK_ORDER_UP]","javascript:n_bookmark_move("+c[i]["idx"]+", 'up');");b.append($(a))}}else{b.append("<li style='text-align: center; line-height: 40px;'>등록된 마이메뉴가 없습니다.</li>")}}})}function fn_close_all_menu(){$("header nav").removeClass("open");$("header nav").removeClass("selected");$("header nav").removeClass("on");$("nav .on").removeClass("on");$("aside").removeClass("selected");$("#mnb_site_menu").removeClass();$(".mnb-site-title h2 a").removeClass("on");screen_overlay_del()}var prev_idx="";function admin_menu_auto_select(a){if($.type(a)==="undefined"){}else{if(a!=""){$("#mnb_site_menu").removeClass();$("#mnb_site_menu").find("li").removeClass("selected");if($("#mnu_site_"+a).length>0){$("#mnu_site_"+a).parents("li").addClass("selected")}else{$("#manager_home").addClass("selected");prev_idx="H"}fn_resize();prev_idx=a}else{if(prev_idx==""&&a==""){$("#mnb_site_menu").removeClass();$("#manager_home").addClass("selected");prev_idx="H"}}}}function admin_main_auto_select(a){if($.type(a)==="undefined"){}else{if(a!=""){$("#mnb_site_menu").removeClass();$("#mnb_site_menu").find("li").removeClass("selected");if($("#mnu_site_m_"+a).length>0){$("#mnu_site_m_"+a).parents("li").addClass("selected");$("#mnu_site_m_"+a).siblings("ul").children("li:first-child").addClass("selected")}else{$("#manager_home").addClass("selected");prev_idx="H"}fn_resize();prev_idx=a}else{if(prev_idx==""&&a==""){$("#mnb_site_menu").removeClass();$("#manager_home").addClass("selected");prev_idx="H"}}}};